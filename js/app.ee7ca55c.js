(function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/TrelloIntegrationdemo/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0ab0":function(t,e,a){"use strict";a("c432")},"16c0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("466d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Trello Logo",contain:"","min-width":"100",src:"https://1000logos.net/wp-content/uploads/2021/05/Trello-logo-500x281.png",width:"100"}})],1),a("v-spacer"),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,transition:"scale-transition",origin:"top right",value:t.selectBoardVisible},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{slot:"activator",color:"primary",dark:"",text:""},slot:"activator"},n),[a("span",{staticClass:"white--text"},[a("v-icon",[t._v("mdi-account")]),t._v(" Select Board ")],1)])]}}])},[a("SelectBoard",{on:{"close-dialog":t.closeDialog,"selected-board":t.fetchIssues}})],1),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,transition:"scale-transition",origin:"top right"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{slot:"activator",color:"primary",dark:"",text:""},slot:"activator"},n),[a("span",{staticClass:"white--text"},[a("v-icon",[t._v("mdi-account")]),t._v(" Link to Trello ")],1)])]}}])},[a("LinkToTrello")],1),t.user.id?[t._v(" Linked to: Â  "),a("span",{staticClass:"white--text"},[t._v(" "+t._s(t.user.name)+" ")])]:t._e()],2),a("v-main",[a("br"),a("div",{staticStyle:{"margin-right":"30px"}},[a("v-row",{attrs:{cols:"12",justify:"end"}},[a("v-layout",{staticStyle:{"margin-left":"50px"},attrs:{row:"",wrap:"","align-center":""}},[a("v-dialog",{attrs:{"max-width":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},n),[a("v-icon",[t._v("mdi-plus")]),t._v(" Create Card ")],1)]}}]),model:{value:t.createCardVisible,callback:function(e){t.createCardVisible=e},expression:"createCardVisible"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Create Card")])]),a("v-card-text",[a("v-text-field",{attrs:{label:"Card Text",required:""},model:{value:t.newCard.name,callback:function(e){t.$set(t.newCard,"name",e)},expression:"newCard.name"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.createCardVisible=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.createCard}},[t._v(" Create ")])],1)],1)],1)],1),a("v-col",{staticStyle:{color:"#000"},attrs:{cols:"7"}},[a("Board",{attrs:{cards:t.cards},on:{remove:t.removeCard}})],1),a("v-col",{staticStyle:{color:"#000"},attrs:{cols:"3"}},[a("div",[a("Issues",{key:this.issueKey,on:{"add-to-canvas":t.addToCanvas}})],1)])],1)],1)])],1)},r=[],i=(a("d3b7"),a("99af"),a("b0c0"),a("4de4"),a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Select Board")])]),a("v-card-text",[a("v-select",{attrs:{items:t.organizations,label:"Organization","item-text":"name","item-value":"id"},on:{change:t.fetchBoards},model:{value:t.selectedOrganization,callback:function(e){t.selectedOrganization=e},expression:"selectedOrganization"}})],1),a("v-card-text",[a("v-select",{attrs:{items:t.boards,disabled:null===t.selectedOrganization,label:"Board","item-text":"name","item-value":"id"},model:{value:t.selectedBoard,callback:function(e){t.selectedBoard=e},expression:"selectedBoard"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.select}},[t._v(" "+t._s(t.buttonText)+" ")])],1)],1)],1)}),s=[],l=(a("e9c4"),{data:function(){return{selectedOrganization:null,selectedBoard:null,organizations:[],boards:[],buttonText:"Select"}},methods:{fetchBoards:function(){var t=this,e=localStorage.getItem("userId"),a=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/boards?userId="+e+"&sketchId="+a+"&organizationId="+this.selectedOrganization).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.boards=e}catch(a){t.boards=e}}))},fetchOrganizations:function(){var t=this,e=localStorage.getItem("userId"),a=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/organizations?userId="+e+"&sketchId="+a).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.organizations=e}catch(a){t.organizations=e}}))},select:function(){var t=this,e=localStorage.getItem("userId"),a=localStorage.getItem("sketchId");this.buttonText="Loading...",fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/boards/select?userId="+e+"&sketchId="+a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boardId:this.selectedBoard})}).then((function(t){return t.json()})).then((function(e){console.log(e),localStorage.setItem("boardId",t.selectedBoard),localStorage.setItem("organizationId",t.selectedOrganization),t.buttonText="Selected",t.$emit("selected-board")})).catch((function(e){console.log(e),t.buttonText="Error"}))}},mounted:function(){this.fetchOrganizations()}}),c=l,d=a("2877"),u=a("6544"),f=a.n(u),v=a("8336"),h=a("b0af"),m=a("99d9"),p=a("b974"),g=Object(d["a"])(c,i,s,!1,null,null,null),b=g.exports;f()(g,{VBtn:v["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VSelect:p["a"]});var I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Authorize Trello")])]),a("v-card-text",[a("p",[a("span",{staticClass:"grey--text"},[t._v(" You need to authorize Trello to access your boards. ")])])]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",dark:"",href:t.trelloAuthUrl}},[t._v(" Authorize Trello ")])],1)],1)],1)},V=[],k={name:"LinkToTrello",data:function(){return{trelloAPIKey:"d61396d6f8b46b6f2e883932d79835eb",trelloAppName:"Trello Fl0 Integration",trelloReturnUrl:window.location.href}},computed:{trelloAuthUrl:function(){return"https://trello.com/1/authorize?key=".concat(this.trelloAPIKey,"&name=").concat(this.trelloAppName,"&expiration=never&response_type=token&scope=read,write&return_url=").concat(this.trelloReturnUrl)}}},C=k,_=Object(d["a"])(C,I,V,!1,null,null,null),x=_.exports;f()(_,{VBtn:v["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"]});var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{color:"#fffee8",flat:"",tile:"",elevation:"2"}},[a("v-card-title",[t._v(" Trello Issues ")]),a("hr"),a("v-list",t._l(t.issues,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.name)+" ")]),a("v-btn",{attrs:{color:"primary",dark:"",small:""},on:{click:function(a){return t.addToCanvas(e)}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" Add to canvas ")],1)],1)],1)})),1)],1)],1)},y=[],T={name:"Issues",data:function(){return{issues:[]}},methods:{fetchIssues:function(){var t=this,e=localStorage.getItem("userId"),a=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/issues?userId="+e+"&sketchId="+a).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.issues=e}catch(a){t.issues=e}}))},addToCanvas:function(t){t.isOnTrello=!0,this.$emit("add-to-canvas",t)}},mounted:function(){this.fetchIssues()}},S=T,O=a("132d"),B=a("8860"),j=a("da13"),z=a("5d23"),L=Object(d["a"])(S,w,y,!1,null,null,null),D=L.exports;f()(L,{VBtn:v["a"],VCard:h["a"],VCardTitle:m["c"],VIcon:O["a"],VList:B["a"],VListItem:j["a"],VListItemContent:z["a"],VListItemTitle:z["b"]});var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mainBoard"}},[t._l(t.cards,(function(e,n){return[a("Card",{key:e.id,attrs:{card:e,index:n},on:{remove:t.remove}})]}))],2)},M=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Draggable",[a("v-card",{staticClass:"card",attrs:{elevation:"2",flat:"",tile:"",color:"#fffee8",ripple:!1},on:{contextmenu:t.showMenu}},[a("v-card-text",[a("v-icon",[t._v("mdi-card-text-outline")]),t._v(" "+t._s(t.card.name)+" ")],1),a("v-menu",{attrs:{transition:"scale-transition","position-x":t.positionX,"position-y":t.positionY,absolute:""},model:{value:t.isMenuVisible,callback:function(e){t.isMenuVisible=e},expression:"isMenuVisible"}},[a("v-list",[t.card.isOnTrello?t._e():a("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.selectList.apply(null,arguments)}}},[a("v-list-item-title",[a("v-icon",[t._v("mdi-plus")]),t._v(" Create Issue on Trello ")],1)],1),t.card.isOnTrello?a("v-list-item",{on:{click:t.viewOnTrello}},[a("v-list-item-title",[a("v-icon",[t._v("mdi-eye")]),t._v(" View on Trello ")],1)],1):t._e(),a("v-list-item",{on:{click:t.remove}},[a("v-list-item-title",[a("v-icon",[t._v("mdi-minus")]),t._v(" Remove ")],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.isDialogVisible,callback:function(e){t.isDialogVisible=e},expression:"isDialogVisible"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Create Issue on Trello")])]),a("v-card-text",[a("v-select",{attrs:{items:t.lists,"item-text":"name","item-value":"id",label:"List",required:""},model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"Issue Name",required:""},model:{value:t.card.name,callback:function(e){t.$set(t.card,"name",e)},expression:"card.name"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.isDialogVisible=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.createCard}},[t._v(" Create ")])],1)],1)],1)],1)},E=[],P=a("4750"),N={name:"Card",components:{Draggable:P["a"]},props:{card:{type:Object,required:!0}},data:function(){return{isMenuVisible:!1,isDialogVisible:!1,positionX:0,positionY:0,lists:[],selectedList:null}},methods:{createCard:function(){var t=localStorage.getItem("userId"),e=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/issue?userId="+t+"&sketchId="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listId:this.selectedList,name:this.card.name})}).then((function(t){return t.json()})).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},remove:function(){this.$emit("remove",this.card.id)},showMenu:function(t){var e=this;t.preventDefault(),this.isMenuVisible=!1,this.positionX=t.pageX,this.positionY=t.pageY,this.$nextTick((function(){e.isMenuVisible=!0}))},viewOnTrello:function(){window.open(this.card.url,"_blank")},fetchLists:function(){var t=this,e=localStorage.getItem("userId"),a=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/lists?userId="+e+"&sketchId="+a).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.lists=e}catch(a){t.lists=e}}))},selectList:function(){this.isDialogVisible=!0}},mounted:function(){console.log(this.card),this.fetchLists()}},U=N,q=(a("0ab0"),a("169a")),K=a("e449"),Y=a("2fa4"),J=a("8654"),R=Object(d["a"])(U,$,E,!1,null,null,null),X=R.exports;f()(R,{VBtn:v["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VDialog:q["a"],VIcon:O["a"],VList:B["a"],VListItem:j["a"],VListItemTitle:z["b"],VMenu:K["a"],VSelect:p["a"],VSpacer:Y["a"],VTextField:J["a"]});var F={name:"Board",components:{Card:X},props:{cards:{type:Array,required:!0}},methods:{remove:function(t){this.$emit("remove",t)}}},G=F,H=(a("b2e8"),Object(d["a"])(G,A,M,!1,null,null,null)),Q=H.exports,W={name:"App",data:function(){return{trelloToken:"d61396d6f8b46b6f2e883932d79835eb",user:{id:"",name:"",avatar:""},sketchId:"",userId:"",selectBoardVisible:!1,createCardVisible:!1,cards:[],issueKey:0,newCard:{}}},components:{SelectBoard:b,LinkToTrello:x,Issues:D,Board:Q},methods:{getLinkedUser:function(){var t=this,e=localStorage.getItem("trelloToken");fetch("https://api.trello.com/1/members/me?key=".concat(this.trelloToken,"&token=").concat(e)).then((function(t){return t.json()})).then((function(e){t.user.id=e.id,t.user.name=e.fullName,t.user.avatar=e.avatarUrl}))},closeDialog:function(){console.log("close dialog"),this.selectBoardVisible=!1},addToCanvas:function(t){this.cards.push(t)},removeCard:function(t){this.cards=this.cards.filter((function(e){return e.id!=t}))},fetchIssues:function(){this.issueKey+=1},createCard:function(){this.newCard.isOnTrello=!1,this.newCard.url=null,this.cards.push(this.newCard),this.newCard={},this.createCardVisible=!1}},mounted:function(){var t=localStorage.getItem("sketchId");t||(t=Math.random().toString(36),localStorage.setItem("sketchId",t));var e=localStorage.getItem("userId");e||(e=Math.random().toString(36),localStorage.setItem("userId",e)),this.sketchId=t,this.userId=e}},Z=W,tt=a("7496"),et=a("40dc"),at=a("62ad"),nt=a("adda"),ot=a("a722"),rt=a("f6c4"),it=a("0fd9"),st=Object(d["a"])(Z,o,r,!1,null,null,null),lt=st.exports;f()(st,{VApp:tt["a"],VAppBar:et["a"],VBtn:v["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:at["a"],VDialog:q["a"],VIcon:O["a"],VImg:nt["a"],VLayout:ot["a"],VMain:rt["a"],VMenu:K["a"],VRow:it["a"],VSpacer:Y["a"],VTextField:J["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},dt=[],ut=(a("1276"),{mounted:function(){var t=window.location.hash.substr(1).split("&")[0].split("=")[1],e=localStorage.getItem("sketchId"),a=localStorage.getItem("userId");e||(e=Math.random().toString(36),localStorage.setItem("sketchId",e)),a||(a=Math.random().toString(36),localStorage.setItem("userId",a)),fetch("https://api.fl0.com/invision%20/dev/trello%20integration/flows/register?sketchId="+e+"&userId="+a+"&token="+t).then((function(t){return t.json()})).then((function(t){console.log(t),window.location.href=window.location.href.split("#")[0]})).catch((function(t){console.log(t),window.location.href=window.location.href.split("#")[0]}))}}),ft=ut,vt=Object(d["a"])(ft,ct,dt,!1,null,null,null),ht=vt.exports,mt=a("f309");n["default"].use(mt["a"]);var pt=new mt["a"]({}),gt=a("2f62");n["default"].use(gt["a"]);var bt=new gt["a"].Store({state:{selectedBoard:"",selectedOrganization:""},mutations:{setSelectedBoard:function(t,e){t.selectedBoard=e},setSelectedOrganization:function(t,e){t.selectedOrganization=e},setOrganizations:function(t,e){t.organizations=e},setBoards:function(t,e){t.boards=e}},actions:{selectBoard:function(t,e){var a=t.commit,n=e.board,o=e.organization;a("setSelectedBoard",n),a("setSelectedOrganization",o)}},modules:{}});n["default"].config.productionTip=!1,n["default"].directive("draggable",P["b"]),n["default"].component("Draggable",P["c"]),new n["default"]({vuetify:pt,computed:{ActiveView:function(){return window.location.hash.match(/token=/)?ht:lt}},store:bt,render:function(t){return t(this.ActiveView)}}).$mount("#app")},b2e8:function(t,e,a){"use strict";a("16c0")},c432:function(t,e,a){}});
//# sourceMappingURL=app.ee7ca55c.js.map